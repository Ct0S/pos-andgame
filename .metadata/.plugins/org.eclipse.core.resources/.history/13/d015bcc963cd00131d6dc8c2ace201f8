package com.unopar.spaceboy.character;

import org.andengine.audio.sound.Sound;
import org.andengine.engine.Engine;
import org.andengine.entity.sprite.AnimatedSprite;
import org.andengine.opengl.texture.region.ITiledTextureRegion;

public class Effect extends AnimatedSprite {
	private Sound mSound;
	private boolean mInAnimation;
	
	public Effect(Sound sound, 
			ITiledTextureRegion textureRegion, Engine engine) {
		super(0, 0, textureRegion, engine.getVertexBufferObjectManager());
		
		setVisible(false);
	}
	
	public void show(float x, float y) {
		if(mInAnimation) {
			stopAnimation();
		}
		
		animate();		
	}
	
	private void animate() {
		int firstFrameIndex = getFirstFrameIndex();
		int lastFrameIndex = getLastFrameIndex();
		
		long[] framesDurations = 
				new long[lastFrameIndex - firstFrameIndex + 1];
		
		for(int i = 0; i < framesDurations.length; i++) {
			framesDurations[i] = getFrameDuration(firstFrameIndex + i);
		}
		
		animate(framesDurations, firstFrameIndex, 
				lastFrameIndex, false, animationListerner);
	}
	
}
